{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jason\\\\Documents\\\\1-Web-Projects\\\\chat-app-tut\\\\src\\\\components\\\\ChatRoom.js\",\n    _s = $RefreshSig$();\n\nimport ChatMessage from \"./ChatMessage\";\nimport { collection, orderBy, query, limit, serverTimestamp } from \"firebase/firestore\";\nimport { db, auth } from \"../backend/firebase-config\";\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ChatRoom() {\n  _s();\n\n  const messagesRef = collection(db, \"messages\");\n  const q = query(messagesRef, orderBy(\"createdAt\"), limit(25));\n  const [messages] = useCollectionData(q, {\n    idField: \"id\"\n  });\n  const [formValue, setFormValue] = useState(\"\");\n\n  const sendMessage = async e => {\n    e.preventDefault();\n    const {\n      uid,\n      photoURL\n    } = auth.currentUser;\n    await messagesRef.add({\n      text: formValue,\n      createdAt: serverTimestamp(),\n      uid,\n      photoURL\n    });\n    setFormValue(\"\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex flex-col gap-3 px-3 py-2 overflow-y-scroll bg-blue-300 grow scroll-smooth\",\n      children: messages && messages.map(msg => /*#__PURE__*/_jsxDEV(ChatMessage, {\n        message: msg\n      }, msg.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 33\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      className: \"flex items-center justify-between gap-2 p-2 bg-blue-100 bg-opacity-25 rounded-b md:text-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"p-1 rounded shadow-inner h-14 text-slate-800 grow bg-blue-50\",\n        placeholder: \"Say something nice\",\n        value: formValue,\n        onChange: e => setFormValue(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"w-12 h-12 font-bold text-blue-100 bg-blue-500 rounded drop-shadow hover:text-blue-50 active:drop-shadow-sm\",\n        disabled: !formValue,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          class: \"ri-send-plane-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ChatRoom, \"smj8lqBfgxNW4+OXtATVCs1+uX0=\", false, function () {\n  return [useCollectionData];\n});\n\n_c = ChatRoom;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"sources":["C:/Users/jason/Documents/1-Web-Projects/chat-app-tut/src/components/ChatRoom.js"],"names":["ChatMessage","collection","orderBy","query","limit","serverTimestamp","db","auth","useCollectionData","useState","ChatRoom","messagesRef","q","messages","idField","formValue","setFormValue","sendMessage","e","preventDefault","uid","photoURL","currentUser","add","text","createdAt","map","msg","id","target","value"],"mappings":";;;AAAA,OAAOA,WAAP,MAAwB,eAAxB;AACA,SACEC,UADF,EAEEC,OAFF,EAGEC,KAHF,EAIEC,KAJF,EAKEC,eALF,QAMO,oBANP;AAOA,SAASC,EAAT,EAAaC,IAAb,QAAyB,4BAAzB;AACA,SAASC,iBAAT,QAAkC,gCAAlC;AACA,SAASC,QAAT,QAAyB,OAAzB;;;AAEA,eAAe,SAASC,QAAT,GAAoB;AAAA;;AACjC,QAAMC,WAAW,GAAGV,UAAU,CAACK,EAAD,EAAK,UAAL,CAA9B;AACA,QAAMM,CAAC,GAAGT,KAAK,CAACQ,WAAD,EAAcT,OAAO,CAAC,WAAD,CAArB,EAAoCE,KAAK,CAAC,EAAD,CAAzC,CAAf;AACA,QAAM,CAACS,QAAD,IAAaL,iBAAiB,CAACI,CAAD,EAAI;AAAEE,IAAAA,OAAO,EAAE;AAAX,GAAJ,CAApC;AAEA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BP,QAAQ,CAAC,EAAD,CAA1C;;AAEA,QAAMQ,WAAW,GAAG,MAAOC,CAAP,IAAa;AAC/BA,IAAAA,CAAC,CAACC,cAAF;AAEA,UAAM;AAAEC,MAAAA,GAAF;AAAOC,MAAAA;AAAP,QAAoBd,IAAI,CAACe,WAA/B;AAEA,UAAMX,WAAW,CAACY,GAAZ,CAAgB;AACpBC,MAAAA,IAAI,EAAET,SADc;AAEpBU,MAAAA,SAAS,EAAEpB,eAAe,EAFN;AAGpBe,MAAAA,GAHoB;AAIpBC,MAAAA;AAJoB,KAAhB,CAAN;AAOAL,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACD,GAbD;;AAeA,sBACE;AAAA,4BACE;AAAM,MAAA,SAAS,EAAC,gFAAhB;AAAA,gBACGH,QAAQ,IACPA,QAAQ,CAACa,GAAT,CAAcC,GAAD,iBAAS,QAAC,WAAD;AAA0B,QAAA,OAAO,EAAEA;AAAnC,SAAkBA,GAAG,CAACC,EAAtB;AAAA;AAAA;AAAA;AAAA,cAAtB;AAFJ;AAAA;AAAA;AAAA;AAAA,YADF,eAKE;AACE,MAAA,QAAQ,EAAEX,WADZ;AAEE,MAAA,SAAS,EAAC,4FAFZ;AAAA,8BAIE;AACE,QAAA,SAAS,EAAC,8DADZ;AAEE,QAAA,WAAW,EAAC,oBAFd;AAGE,QAAA,KAAK,EAAEF,SAHT;AAIE,QAAA,QAAQ,EAAGG,CAAD,IAAOF,YAAY,CAACE,CAAC,CAACW,MAAF,CAASC,KAAV;AAJ/B;AAAA;AAAA;AAAA;AAAA,cAJF,eAUE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAC,4GAFZ;AAGE,QAAA,QAAQ,EAAE,CAACf,SAHb;AAAA,+BAKE;AAAG,UAAA,KAAK,EAAC;AAAT;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,cAVF;AAAA;AAAA;AAAA;AAAA;AAAA,YALF;AAAA,kBADF;AA0BD;;GAhDuBL,Q;UAGHF,iB;;;KAHGE,Q","sourcesContent":["import ChatMessage from \"./ChatMessage\";\r\nimport {\r\n  collection,\r\n  orderBy,\r\n  query,\r\n  limit,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db, auth } from \"../backend/firebase-config\";\r\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function ChatRoom() {\r\n  const messagesRef = collection(db, \"messages\");\r\n  const q = query(messagesRef, orderBy(\"createdAt\"), limit(25));\r\n  const [messages] = useCollectionData(q, { idField: \"id\" });\r\n\r\n  const [formValue, setFormValue] = useState(\"\");\r\n\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const { uid, photoURL } = auth.currentUser;\r\n\r\n    await messagesRef.add({\r\n      text: formValue,\r\n      createdAt: serverTimestamp(),\r\n      uid,\r\n      photoURL,\r\n    });\r\n    \r\n    setFormValue(\"\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <main className=\"flex flex-col gap-3 px-3 py-2 overflow-y-scroll bg-blue-300 grow scroll-smooth\">\r\n        {messages &&\r\n          messages.map((msg) => <ChatMessage key={msg.id} message={msg} />)}\r\n      </main>\r\n      <form\r\n        onSubmit={sendMessage}\r\n        className=\"flex items-center justify-between gap-2 p-2 bg-blue-100 bg-opacity-25 rounded-b md:text-lg\"\r\n      >\r\n        <textarea\r\n          className=\"p-1 rounded shadow-inner h-14 text-slate-800 grow bg-blue-50\"\r\n          placeholder=\"Say something nice\"\r\n          value={formValue}\r\n          onChange={(e) => setFormValue(e.target.value)}\r\n        ></textarea>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-12 h-12 font-bold text-blue-100 bg-blue-500 rounded drop-shadow hover:text-blue-50 active:drop-shadow-sm\"\r\n          disabled={!formValue}\r\n        >\r\n          <i class=\"ri-send-plane-fill\"></i>\r\n        </button>\r\n      </form>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}