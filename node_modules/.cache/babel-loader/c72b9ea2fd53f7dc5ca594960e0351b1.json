{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jason\\\\Documents\\\\1-Web-Projects\\\\cloud-chat\\\\src\\\\components\\\\ChatRoom.js\",\n    _s = $RefreshSig$();\n\nimport ChatMessage from \"./ChatMessage\";\nimport { collection, orderBy, query, limitToLast, serverTimestamp, addDoc } from \"firebase/firestore\";\nimport { db, auth } from \"../backend/firebase-config\";\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\nimport { useState, useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ChatRoom() {\n  _s();\n\n  const messagesRef = collection(db, \"messages\");\n  const q = query(messagesRef, orderBy(\"createdAt\"), limitToLast(25));\n  const [messages] = useCollectionData(q, {\n    idField: \"id\"\n  });\n  const [formValue, setFormValue] = useState(\"\");\n  const dummy = useRef();\n  useEffect(() => dummy.current.scrollIntoView({\n    behavior: \"smooth\"\n  }), [messages]);\n\n  const sendMessage = async e => {\n    e.preventDefault();\n    const {\n      uid,\n      photoURL\n    } = auth.currentUser;\n    await addDoc(messagesRef, {\n      text: formValue,\n      createdAt: serverTimestamp(),\n      uid,\n      photoURL\n    });\n    setFormValue(\"\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex flex-col gap-3 px-3 py-2 overflow-y-scroll bg-blue-300 grow\",\n      children: [messages && messages.map((msg, index) => /*#__PURE__*/_jsxDEV(ChatMessage, {\n        message: msg\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: dummy\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      className: \"flex items-center justify-between gap-2 p-2 bg-blue-100 bg-opacity-25 rounded-b md:text-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"h-12 p-1 rounded shadow-inner text-slate-800 grow bg-blue-50\",\n        placeholder: \"Say something nice\",\n        value: formValue,\n        onChange: e => setFormValue(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"w-12 h-12 font-bold text-blue-100 bg-blue-500 rounded disabled:opacity-50 drop-shadow hover:text-blue-50 active:drop-shadow-sm\",\n        disabled: !formValue,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"ri-send-plane-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ChatRoom, \"Zm+Cvz7oKHK+L12mbfXPdLcsSgs=\", false, function () {\n  return [useCollectionData];\n});\n\n_c = ChatRoom;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"sources":["C:/Users/jason/Documents/1-Web-Projects/cloud-chat/src/components/ChatRoom.js"],"names":["ChatMessage","collection","orderBy","query","limitToLast","serverTimestamp","addDoc","db","auth","useCollectionData","useState","useRef","useEffect","ChatRoom","messagesRef","q","messages","idField","formValue","setFormValue","dummy","current","scrollIntoView","behavior","sendMessage","e","preventDefault","uid","photoURL","currentUser","text","createdAt","map","msg","index","target","value"],"mappings":";;;AAAA,OAAOA,WAAP,MAAwB,eAAxB;AACA,SACEC,UADF,EAEEC,OAFF,EAGEC,KAHF,EAIEC,WAJF,EAKEC,eALF,EAMEC,MANF,QAOO,oBAPP;AAQA,SAASC,EAAT,EAAaC,IAAb,QAAyB,4BAAzB;AACA,SAASC,iBAAT,QAAkC,gCAAlC;AACA,SAASC,QAAT,EAAmBC,MAAnB,EAA2BC,SAA3B,QAA4C,OAA5C;;;AAEA,eAAe,SAASC,QAAT,GAAoB;AAAA;;AACjC,QAAMC,WAAW,GAAGb,UAAU,CAACM,EAAD,EAAK,UAAL,CAA9B;AACA,QAAMQ,CAAC,GAAGZ,KAAK,CAACW,WAAD,EAAcZ,OAAO,CAAC,WAAD,CAArB,EAAoCE,WAAW,CAAC,EAAD,CAA/C,CAAf;AACA,QAAM,CAACY,QAAD,IAAaP,iBAAiB,CAACM,CAAD,EAAI;AAAEE,IAAAA,OAAO,EAAE;AAAX,GAAJ,CAApC;AAEA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BT,QAAQ,CAAC,EAAD,CAA1C;AAEA,QAAMU,KAAK,GAAGT,MAAM,EAApB;AAEAC,EAAAA,SAAS,CACP,MAAMQ,KAAK,CAACC,OAAN,CAAcC,cAAd,CAA6B;AAAEC,IAAAA,QAAQ,EAAE;AAAZ,GAA7B,CADC,EAEP,CAACP,QAAD,CAFO,CAAT;;AAKA,QAAMQ,WAAW,GAAG,MAAOC,CAAP,IAAa;AAC/BA,IAAAA,CAAC,CAACC,cAAF;AAEA,UAAM;AAAEC,MAAAA,GAAF;AAAOC,MAAAA;AAAP,QAAoBpB,IAAI,CAACqB,WAA/B;AAEA,UAAMvB,MAAM,CAACQ,WAAD,EAAc;AACxBgB,MAAAA,IAAI,EAAEZ,SADkB;AAExBa,MAAAA,SAAS,EAAE1B,eAAe,EAFF;AAGxBsB,MAAAA,GAHwB;AAIxBC,MAAAA;AAJwB,KAAd,CAAZ;AAOAT,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACD,GAbD;;AAeA,sBACE;AAAA,4BACE;AAAM,MAAA,SAAS,EAAC,kEAAhB;AAAA,iBACGH,QAAQ,IACPA,QAAQ,CAACgB,GAAT,CAAa,CAACC,GAAD,EAAMC,KAAN,kBACX,QAAC,WAAD;AAAyB,QAAA,OAAO,EAAED;AAAlC,SAAkBC,KAAlB;AAAA;AAAA;AAAA;AAAA,cADF,CAFJ,eAKE;AAAK,QAAA,GAAG,EAAEd;AAAV;AAAA;AAAA;AAAA;AAAA,cALF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAQE;AACE,MAAA,QAAQ,EAAEI,WADZ;AAEE,MAAA,SAAS,EAAC,4FAFZ;AAAA,8BAIE;AACE,QAAA,SAAS,EAAC,8DADZ;AAEE,QAAA,WAAW,EAAC,oBAFd;AAGE,QAAA,KAAK,EAAEN,SAHT;AAIE,QAAA,QAAQ,EAAGO,CAAD,IAAON,YAAY,CAACM,CAAC,CAACU,MAAF,CAASC,KAAV;AAJ/B;AAAA;AAAA;AAAA;AAAA,cAJF,eAUE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAC,gIAFZ;AAGE,QAAA,QAAQ,EAAE,CAAClB,SAHb;AAAA,+BAKE;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,cAVF;AAAA;AAAA;AAAA;AAAA;AAAA,YARF;AAAA,kBADF;AA6BD;;GA1DuBL,Q;UAGHJ,iB;;;KAHGI,Q","sourcesContent":["import ChatMessage from \"./ChatMessage\";\r\nimport {\r\n  collection,\r\n  orderBy,\r\n  query,\r\n  limitToLast,\r\n  serverTimestamp,\r\n  addDoc,\r\n} from \"firebase/firestore\";\r\nimport { db, auth } from \"../backend/firebase-config\";\r\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\n\r\nexport default function ChatRoom() {\r\n  const messagesRef = collection(db, \"messages\");\r\n  const q = query(messagesRef, orderBy(\"createdAt\"), limitToLast(25));\r\n  const [messages] = useCollectionData(q, { idField: \"id\" });\r\n\r\n  const [formValue, setFormValue] = useState(\"\");\r\n\r\n  const dummy = useRef();\r\n\r\n  useEffect(\r\n    () => dummy.current.scrollIntoView({ behavior: \"smooth\" }),\r\n    [messages]\r\n  );\r\n\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const { uid, photoURL } = auth.currentUser;\r\n\r\n    await addDoc(messagesRef, {\r\n      text: formValue,\r\n      createdAt: serverTimestamp(),\r\n      uid,\r\n      photoURL,\r\n    });\r\n\r\n    setFormValue(\"\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <main className=\"flex flex-col gap-3 px-3 py-2 overflow-y-scroll bg-blue-300 grow\">\r\n        {messages &&\r\n          messages.map((msg, index) => (\r\n            <ChatMessage key={index} message={msg} />\r\n          ))}\r\n        <div ref={dummy}></div>\r\n      </main>\r\n      <form\r\n        onSubmit={sendMessage}\r\n        className=\"flex items-center justify-between gap-2 p-2 bg-blue-100 bg-opacity-25 rounded-b md:text-lg\"\r\n      >\r\n        <input\r\n          className=\"h-12 p-1 rounded shadow-inner text-slate-800 grow bg-blue-50\"\r\n          placeholder=\"Say something nice\"\r\n          value={formValue}\r\n          onChange={(e) => setFormValue(e.target.value)}\r\n        ></input>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-12 h-12 font-bold text-blue-100 bg-blue-500 rounded disabled:opacity-50 drop-shadow hover:text-blue-50 active:drop-shadow-sm\"\r\n          disabled={!formValue}\r\n        >\r\n          <i className=\"ri-send-plane-fill\"></i>\r\n        </button>\r\n      </form>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}