{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jason\\\\Documents\\\\1-Web-Projects\\\\cloud-chat\\\\src\\\\components\\\\UserProfile.js\",\n    _s = $RefreshSig$();\n\nimport defaultPic from \"../images/cloud-fill.png\";\nimport { doc, getDoc, collection, updateDoc, arrayRemove, arrayUnion } from \"firebase/firestore\";\nimport { useDocumentData } from \"react-firebase-hooks/firestore\";\nimport { auth, db } from \"../backend/firebase-config\";\nimport Loading from \"./Loading\";\nimport Error from \"./Error\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile(_ref) {\n  _s();\n\n  let {\n    user,\n    accountSelection,\n    setAccountSelection,\n    setScreen\n  } = _ref;\n  const selectedAccountRef = doc(db, \"accounts\", accountSelection);\n  const [selectedAccount, selectedAccountLoading, selectedAccountError] = useDocumentData(selectedAccountRef);\n  const userAccountRef = doc(db, \"accounts\", user.uid);\n  const [userAccount, userLoading, userError] = useDocumentData(userAccountRef);\n\n  const followUser = () => {\n    updateDoc(userAccountRef, {\n      following: arrayUnion(selectedAccount.uid)\n    });\n    updateDoc(selectedAccountRef, {\n      followers: arrayUnion(user.uid)\n    });\n  };\n\n  const unFollowUser = () => {\n    updateDoc(userAccountRef, {\n      following: arrayRemove(selectedAccount.uid)\n    });\n    updateDoc(selectedAccountRef, {\n      followers: arrayRemove(user.uid)\n    });\n  };\n\n  if (selectedAccountLoading || userLoading) {\n    return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 12\n    }, this);\n  } else if (selectedAccountError || userError) {\n    return /*#__PURE__*/_jsxDEV(Error, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 12\n    }, this);\n  } else {\n    const followCheck = userAccount.following.includes(selectedAccount.uid);\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"settings-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"blue-heading\",\n        children: selectedAccount.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: selectedAccount.photoURL || defaultPic,\n        alt: \"user\",\n        width: \"100\",\n        className: \"rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-bold\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Followers\", \" \", selectedAccount.followers ? selectedAccount.followers.length : \"0\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), \" \", \"|\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Following\", \" \", selectedAccount.following ? selectedAccount.following.length : \"0\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), selectedAccount.uid !== user.uid && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"flex items-center gap-1 btn\",\n        onClick: followCheck ? unFollowUser : followUser,\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: `ri-user-${followCheck ? \"unfollow\" : \"follow\"}-line`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: followCheck ? \"Unfollow\" : \"Follow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Last Login:\", \" \", selectedAccount.lastLogin && selectedAccount.lastLogin.toDate().toDateString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), selectedAccount.uid !== user.uid && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex items-center gap-1 hover:cursor-pointer hover:text-blue-500\",\n        onClick: () => setScreen(\"users\"),\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"text-lg font-bold ri-arrow-go-back-line\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \" Go Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(Profile, \"ufxPjv/Jn6b9xpa70aTNBYfauNM=\", false, function () {\n  return [useDocumentData, useDocumentData];\n});\n\n_c = Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["C:/Users/jason/Documents/1-Web-Projects/cloud-chat/src/components/UserProfile.js"],"names":["defaultPic","doc","getDoc","collection","updateDoc","arrayRemove","arrayUnion","useDocumentData","auth","db","Loading","Error","Profile","user","accountSelection","setAccountSelection","setScreen","selectedAccountRef","selectedAccount","selectedAccountLoading","selectedAccountError","userAccountRef","uid","userAccount","userLoading","userError","followUser","following","followers","unFollowUser","followCheck","includes","name","photoURL","length","lastLogin","toDate","toDateString"],"mappings":"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","sourcesContent":["import defaultPic from \"../images/cloud-fill.png\";\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  collection,\r\n  updateDoc,\r\n  arrayRemove,\r\n  arrayUnion,\r\n} from \"firebase/firestore\";\r\nimport { useDocumentData } from \"react-firebase-hooks/firestore\";\r\nimport { auth, db } from \"../backend/firebase-config\";\r\nimport Loading from \"./Loading\";\r\nimport Error from \"./Error\";\r\n\r\nexport default function Profile({\r\n  user,\r\n  accountSelection,\r\n  setAccountSelection,\r\n  setScreen,\r\n}) {\r\n  const selectedAccountRef = doc(db, \"accounts\", accountSelection);\r\n  const [selectedAccount, selectedAccountLoading, selectedAccountError] =\r\n    useDocumentData(selectedAccountRef);\r\n\r\n  const userAccountRef = doc(db, \"accounts\", user.uid);\r\n  const [userAccount, userLoading, userError] = useDocumentData(userAccountRef);\r\n\r\n  const followUser = () => {\r\n    updateDoc(userAccountRef, {\r\n      following: arrayUnion(selectedAccount.uid),\r\n    });\r\n\r\n    updateDoc(selectedAccountRef, {\r\n      followers: arrayUnion(user.uid),\r\n    });\r\n  };\r\n\r\n  const unFollowUser = () => {\r\n    updateDoc(userAccountRef, {\r\n      following: arrayRemove(selectedAccount.uid),\r\n    });\r\n\r\n    updateDoc(selectedAccountRef, {\r\n      followers: arrayRemove(user.uid),\r\n    });\r\n  };\r\n\r\n  if (selectedAccountLoading || userLoading) {\r\n    return <Loading />;\r\n  } else if (selectedAccountError || userError) {\r\n    return <Error />;\r\n  } else {\r\n    const followCheck = userAccount.following.includes(selectedAccount.uid);\r\n\r\n    return (\r\n      <section className=\"settings-section\">\r\n        <h1 className=\"blue-heading\">{selectedAccount.name}</h1>\r\n        <img\r\n          src={selectedAccount.photoURL || defaultPic}\r\n          alt=\"user\"\r\n          width=\"100\"\r\n          className=\"rounded\"\r\n        />\r\n\r\n        <p className=\"font-bold\">\r\n          <span>\r\n            Followers{\" \"}\r\n            {selectedAccount.followers ? selectedAccount.followers.length : \"0\"}\r\n          </span>{\" \"}\r\n          |{\" \"}\r\n          <span>\r\n            Following{\" \"}\r\n            {selectedAccount.following ? selectedAccount.following.length : \"0\"}\r\n          </span>\r\n        </p>\r\n\r\n        {selectedAccount.uid !== user.uid && (\r\n          <button\r\n            className=\"flex items-center gap-1 btn\"\r\n            onClick={followCheck ? unFollowUser : followUser}\r\n          >\r\n            <i\r\n              className={`ri-user-${followCheck ? \"unfollow\" : \"follow\"}-line`}\r\n            ></i>\r\n            <span>{followCheck ? \"Unfollow\" : \"Follow\"}</span>\r\n          </button>\r\n        )}\r\n        <p>\r\n          Last Login:{\" \"}\r\n          {selectedAccount.lastLogin &&\r\n            selectedAccount.lastLogin.toDate().toDateString()}\r\n        </p>\r\n        {selectedAccount.uid !== user.uid && (\r\n          <p\r\n            className=\"flex items-center gap-1 hover:cursor-pointer hover:text-blue-500\"\r\n            onClick={() => setScreen(\"users\")}\r\n          >\r\n            <i className=\"text-lg font-bold ri-arrow-go-back-line\"></i>\r\n            <span> Go Back</span>\r\n          </p>\r\n        )}\r\n      </section>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}